<!DOCTYPE html>
<html>
<head>
	<title>Mapossum</title>
	<meta charset="utf-8" />	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" />
	<meta name="description" content="The Mapossum is a map-centric web-survey application that aggregates to numerous scales. This allows for users to explore cultural and regional differences at different spatial scales." />

	<!-- styles -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />	
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" />
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.min.css" />
	<link rel="stylesheet" href="styles/jquery.share.css" />
	<link rel="stylesheet" href="styles/styles.css" />
	<!-- js -->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>	
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>	
	<script src="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>	
	<script src="js/jquery.share.js"></script>
</head>

<body>

	<div data-role="page" class="ui-responsive-panel" id="home" data-theme="b" >
    	<div data-role="header" style="background-color:#2F4F4F;">
        	<h1 class="white">Mapossum</h1>
        	<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
			<a href="#login" id ="loginIcon"data-icon="user" data-iconpos="notext">Add</a>			
        </div>

        <div data-role="content">
        	<div id="map"><div id="maplegend"></div></div>   
        	<span class="ui-btn-icon-notext ui-icon-action" id="share"></span>
        	<a href="#"><img src="images/layers.png" id="boundaryChange"></a>
        	<a href="#"><img src="images/info.png" id="legend"></a>
        	<a href="#"><img src="images/globe.png" id="globe"></a>

        </div>

     	<div data-role="footer" style="background-color:#2F4F4F;" data-fullscreen="true" data-position-fixed="true">
     		<div data-role="navbar" style="background-color:#2F4F4F;height:62px">
        		<div class="white portrait" id="curQuestion" style="background-color:#2F4F4F;height:55px;font-size:40px;margin:12px">
        		   <center></center></div> <!-- This needs to be here so the panel is drawn the correct size so that the map will also not be underneeth the panel -->      	
        	</div>
			
		    <div data-role="navbar" class="ui-btn-active navcolorfix ui-state-persist" data-iconpos="right">
		        <ul>
		            <li><a href="#" id="previousQuestion" data-icon="arrow-l">Previous</a></li>
		            <li><a href="#" id="answerQuestion" data-icon="check">Answer</a></li>
		            <li><a href="#" id="nextQuestion" data-icon="arrow-r">Next</a></li>
		        </ul>
		    </div><!-- /navbar -->		    
		</div><!-- /footer -->
    
	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="nav-panel" data-theme="b">

		<ul data-role="listview" data-theme="b" data-divider-theme="a" style="margin-top:-16px;" class="nav-search">
			<li data-icon="delete" style="background-color:#111;">
				<a href="#" data-rel="close">Close menu</a>
			</li>
			<li data-filtertext="accordions collapsible set collapsible-set collapsed">
				<a href="#about">About</a>
			</li>
			<li data-filtertext="accordions collapsible set collapsible-set collapsed">
				<a href="#account" id="acc">Account</a>
			</li>
			<li data-filtertext="accordions collapsible set collapsible-set collapsed">
				<a href="#contactInfo">Contact Us</a>
			</li>			
			<li data-filtertext="wai-aria voiceover accessibility screen reader">
				<a href="#createQuestion">Create Question</a>
			</li>
			<li data-filtertext="accordions collapsible set collapsible-set collapsed">
				<a href="#help">Help</a>
			</li>
			<li data-filtertext="accordions collapsible set collapsible-set collapsed">
				<a href="#searchLocation">Search</a>
			</li>			
		</ul>

		<!-- panel content goes here -->
	</div><!-- /panel -->


	<div data-role="panel" class="slideout" data-position="right" data-position-fixed="false" data-display="overlay" id="add" data-theme="b">

		<form class="userform">
			<h2>Create new user</h2>
			<label for="user">Email</label>
			<input type="text" name="username" id="username" value="" data-clear-btn="true" data-mini="true">

			<label for="pass">Password:</label>
			<input type="password" name="password" id="password" value="" data-clear-btn="true" autocomplete="off" data-mini="true">

			<label for="first">First Name</label>
			<input type="text" name="first" id="first" value="" data-clear-btn="true" data-mini="true">

			<label for="last">Last Name</label>
			<input type="text" name="last" id="last" value="" data-clear-btn="true" data-mini="true">			

			<label for="affiliation">Affiliation</label>
			<input type="text" name="affiliation" id="affiliation" value="" data-clear-btn="true" data-mini="true">			

			<div class="ui-grid-a">
			    <div class="ui-block-a" id="subUser"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Submit</a></div>			    
			    <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Cancel</a></div>
			</div>
		</form>

		<!-- panel content goes here -->
	</div><!-- /panel -->


	<div data-role="panel" class="slideout" data-position="right" data-position-fixed="false" data-display="overlay" id="login" data-theme="b">

		<form class="userform">
			<h2>Login</h2>
			<label for="username">Username</label>
			<input type="text" id="txtUsername" data-clear-btn="true" data-mini="true">

			<label for="password">Password:</label>
			<input type="password" id="txtPassword" data-clear-btn="true" autocomplete="off" data-mini="true">

			<br><hr>

			<p>If you have not registered for an account, <a href="#add">Register Here</a>.</p>		

			<div class="ui-grid-a">
			    <div class="ui-block-a" id="verify"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Login</a></div>
			    <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Cancel</a></div>
			</div>
		</form>

		<!-- panel content goes here -->
	</div><!-- /panel -->

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="createQuestion" data-theme="b" data-dismissible="false">

		<form class="userform">
			<h2>Create a New Question</h2>
			<div data-role="fieldcontain">
				<p>Question:</p>
				<textarea cols="40" rows="8" name="textarea" id="questionFld" data-mini="true"></textarea>
			</div>
			<div data-role="fieldcontain">
				<p>Description:<br><small><i>(Use this space to give background information regarding your question.)</i></small></p>
				<textarea cols="40" rows="8" name="textarea" id="descriptionFld" data-mini="true"></textarea>
			</div>
			<div data-role="fieldcontain">
				<p>Hashtag:</p>
				<textarea cols="40" rows="1" name="textarea" id="hashFld" data-mini="true"></textarea>
			</div>
			<div data-role="fieldcontain">
				<p>Number of Answers:</p>
			 	<input type="range" name="slider" id="sliderFld" value="4" min="0" max="10" data-highlight="true" data-mini="true" />
			</div>
			<div data-role="fieldcontain">
				<p>Does your question require pictures?</p>
				<select name="slider" id="flip-b" data-role="slider">
					<option value="no">No</option>
					<option value="yes">Yes</option>
				</select>
			</div> 			

			<div class="ui-grid-a">
			    <div class="ui-block-a" id="subQues"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Submit</a></div>
			    <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Cancel</a></div>
			</div>
		</form>

		<!-- panel content goes here -->
	</div><!-- /panel -->

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="addAnswers" data-theme="b" data-dismissible="false">

		<form class="radio">
			<h3>Enter the answers associated with your question:</h3>
			
			<div id="answers"></div>

			<div class="ui-grid-a">
			    <div class="ui-block-a" id="subAnswer"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Submit</a></div>
			    <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Cancel</a></div>
			</div>
		</form>

		<!-- panel content goes here -->
	</div><!-- /panel -->

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="responses" data-theme="b" data-dismissible="false">
			<div id="question"></div>					
			<div id="answerList"></div>				
			<div class="loadingani" id="answerLoading">
			<div class="lpbar">
			<div id="block_1" class="barlittle"></div>
			<div id="block_2" class="barlittle"></div>
			<div id="block_3" class="barlittle"></div>
			<div id="block_4" class="barlittle"></div>
			<div id="block_5" class="barlittle"></div>
			</div>
			<br>
			<small>Please Wait</small>	
			</div>
			 		
			
		
			
			<div class="ui-grid-a">
			    <div class="ui-block-a" id="subResponse"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Submit</a></div>
			    <div class="ui-block-b"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Cancel</a></div>
			</div>
			
			
			<hr>			
			<h4>Current Response Position: <h4>
			<div class="loadingani" id="locationLoading">
			<div class="lpbar">
			<div id="block_1" class="barlittle"></div>
			<div id="block_2" class="barlittle"></div>
			<div id="block_3" class="barlittle"></div>
			<div id="block_4" class="barlittle"></div>
			<div id="block_5" class="barlittle"></div>
			</div>
			<br>
			<small>Please Wait</small>	
			</div>
			
			<div id="curLocationText"><p class="med">Your position is not defined.  You will not be able to answer questions until you set your position below.</p></div>
			<div><a href="#searchLocation" data-role="button" data-inline="true" data-mini="false" data-transition="pop"id="setPos">Update Map Position</a></div>
<!-- 			<div id="setLocation"></div>
 -->
		<!-- panel content goes here -->
	</div><!-- /panel -->

	<div data-role="panel" class="slideout" data-position="right" data-position-fixed="false" data-display="overlay" id="searchLocation" data-theme="b">	
			<h3>Update position below:</h3>
			<a href="#" data-role="button" data-inline="true" data-mini="false" data-transition="pop" id="isp">Device location</a>
			<a href="#" data-role="button" data-inline="true" data-mini="false" data-transition="pop"id="mapcenter">Current map center</a>
			<hr>
			<div class="loadingani" id="locationLoading2">
			<div class="lpbar">
			<div id="block_1" class="barlittle"></div>
			<div id="block_2" class="barlittle"></div>
			<div id="block_3" class="barlittle"></div>
			<div id="block_4" class="barlittle"></div>
			<div id="block_5" class="barlittle"></div>
			</div>
			<br>
			<small>Please Wait</small>	
			</div>
			<h3>Current Response Position: </h3>
			<div id="curLocationText2">
			<p class="med">Your position is not defined.  You will not be able to answer questions until you set your position.</p></div>
			<hr>
			<h3>Search for location:</h3>
			<p>You may search using city, state, country, zip code, or addess. After searching, center the map on the location you want to use.</p>
			<div data-role="fieldcontain">			        
		        <input type="text" name="searchText" id="searchText" value=""  />
			</div>       
			<div class="ui-grid-a">
				    <div class="ui-block-a" id="subLocation"><a href="#" data-rel="close" data-role="button" data-theme="b" data-mini="true">Search</a></div>
			</div> 
		<!-- panel content goes here -->
	</div><!-- /panel -->

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="contactInfo" data-theme="b">
		<h2>Contact Us</h2>
		<p><a href="mailto:george.raber@usm.edu">George Raber</a></p>
		<p>george.raber@usm.edu</p>
		<p><a href="mailto:jfdickens@gmail.com">James F. Dickens</a> </p>
		<p>jfdickens@gmail.com</p>		
		<p><a href="mailto:joby@usm.edu">Joby Bass</a></p>
		<p>joby@usm.edu</p>  
			<!-- panel content goes here -->
		</div><!-- /panel -->
	

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="about" data-theme="b">

		<h2>About Mapossum</h2>
		<p>This project, originally inspired by the pop vs soda maps (www.popvssoda.com) seeks to create a web application where any question can be asked and answered by anyone with internet access. The Mapossum allows users to visualize spatial patterns in the questions they wish to pose without the need to possess the knowledge necessary to create maps of their own. The application creates a spatial web-survey system that harnesses the visualization power of a web map to explore the spatial components of question. As a tool it has the ability to help users overlay a different dimension of spatial interactions, and provides more insight into cultural and regional interactions. To accomplish this we have created a framework that abstracts the creation of questions and the logging of spatially referenced responses so that the answers can be mapped as points, or aggregated at various levels of administrative or political units (counties, states, countries).</p>
		<!-- panel content goes here -->
	</div><!-- /panel -->	

	<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="help" data-theme="b">

		<h2>Help</h2>
		<p>To <b>create questions</b> you must <a href="#login">login</a>, however if you only wish to answer questions, you do not have to login.</p><p>After you login, you can view all your questions, view chart graphics, and generate a direct link to your question, through the <a href="#account">account page</a>.</p><p>When answering questions, you can use the location provided through your web browser, or use the map center. To make it easier to navigate to a certain location, you can use the <a href="#searchLocation">search</a> feature.</p>

		<!-- panel content goes here -->
	</div><!-- /panel -->	


<div data-role="panel" class="slideout" data-position="right" data-position-fixed="false" data-display="overlay" id="pnlShare" data-theme="b">



		<h2>Share options</h2>

		
		<div id="facbookshare">
		</div>
		
		<div class="ui-field-contain">
			<label for="dLink">Direct Link:</label>
			<textarea name="textarea" id="dLink"></textarea>
		</div>

		<div class="ui-field-contain">
			<label for="eLink">Embed map:</label>
			<textarea name="textarea" id="eLink"></textarea>
		</div>		
		<div data-role="fieldcontain">
		<h4>Update embeded map size :</h4>
			<p>Height:</p>
		 	<input type="range" name="slider" id="sldHeight" value="400" min="50" max="2000" data-highlight="true" data-mini="true" step="50"/>
		</div>

		<div data-role="fieldcontain">
			<p>Width:</p>
		 	<input type="range" name="slider" id="sldWidth" value="400" min="50" max="2000" data-highlight="true" data-mini="true" step="50"/>
		</div>
		

		<!-- panel content goes here -->
	</div><!-- /panel -->	


<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="pnlIdent" data-theme="b">
	
		<div id ="idText"></div>
       	<div id="cvsDiv"></div>
       	<div id="legendPic" style="padding:5px" align="center"></div>

		<!-- panel content goes here -->
</div><!-- /panel -->	




<div data-role="popup" id="boundaryMenu" data-theme="b">
	<ul data-role="listview" data-inset="true" data-theme="b">
		<li data-role="divider" data-theme="a"><b>Select boundary</b></li>
		<li><a href="#" id="updatePoints">Points</a></li>
		<li><a href="#" id="updateCounties">Counties</a></li>
		<li><a href="#" id="updateSubCountries">Sub-Country (ie. states)</a></li>
		<li><a href="#" id="updateCountries">Countries</a></li>
		<li><a href="#" id="updateWatercolor">Watercolor</a></li>
	</ul>
</div>

<div data-role="popup" id="legendPopup" data-theme="b">
	<ul data-role="listview" data-inset="true" data-theme="b">
		<li data-role="divider" data-theme="a"><b>Legend</b></li>
		
		
	</ul>
</div>

<div data-role="popup" id="descriptionPopup">
  <div id="descriptionTxt"></div>
</div>

<div data-role="panel" class="slideout" data-position="left" data-position-fixed="false" data-display="overlay" id="account" data-theme="b">
	<div>
		<h1>Account</h1>
		<div id="accountDiv"></div>
	</div>

		<!-- panel content goes here -->
</div><!-- /panel -->	
</div><!--page -->

<div data-role="popup" id="welcome" data-transition="slidedown"> 
    <center><h1>Welcome to the Mapossum</h1></center>
    <div class="ui-grid-a">
	    <div class="ui-block-a">
		   <h5>What is the Mapossum?</h5><p>The Mapossum is a map-centric web-survey application that aggregates to numerous scales. This allows for users to explore cultural and regional differences at different spatial scales.</p>
		</div>
		<div class="ui-block-b">
		    <h5>How to use the Mapossum?</h5><p>The Mapossum has two basic user experiences. You can forgo creating an account to just answer questions, or create an account to create your own questions.</p>
		</div>
		<div class="ui-block-a">
		    <h5>How do I answer Questions?</h5><p>To answer a question simply navagate to the question you want to answer by using the 'next' or 'previous' question buttons at the bottom of the page, and then click the 'answer' question button.</p>
		</div>
		<div class="ui-block-b">
		    <h5>How do I create a Question?</h5><p>To create a question, you must first create an account and login. After creating an account, you will be given access to create questions and view charts based on user responses to your question via your 'account' page.</p>
		</div>
		<div class="ui-block-a">	
		    <h5>How do I set my location?</h5><p>If you have location services enabled on your device, we will use that location to answer your question. However, if you have this disabled or choose to use another location, you can use the 'use map center' button under the answer questions page.</p>
		</div>
		<div class="ui-block-b">
		    <h5>Share Capabilities</h5><p>The application allows you to share direct links to numerous social media sites that includes any question with a specified zoom level and map extent.</p>
		</div>
		<!-- <div class="ui-block-a">
		     <h5>Embed Maps</h5><p>You can also embed maps into your own website (ie. blogs, news articles, etc) by simplying copying the iframe html from our 'share' page.</p>
		</div>
		<div class="ui-block-b">
			<iframe src="embed/index.html" style="width:100%;height:100%" frameborder="none">
  			<p>Your browser does not support iframes.</p>
		</iframe>
		</div> -->
	</div>
	<div><a href="#home" class="ui-btn ui-btn-b ui-shadow ui-corner-all" id="closeWelcome">Get Started</a></div>

	     <!-- <h5>An example embeded map:</h5>
	    <iframe src="embed/index.html" style="width:100%;height:100%" frameborder="none">
  			<p>Your browser does not support iframes.</p>
		</iframe>
		 <a href="#home" class="ui-btn ui-btn-b ui-shadow ui-corner-all" id="closeWelcome">Get Started</a>
	 /grid-a -->   
</div>

</body>

<script src="js/Chart.js"></script>
<script src="js/init.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54486395-1', 'auto');
  ga('send', 'pageview');

</script>
